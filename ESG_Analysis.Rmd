---
title: "ESG Analysis in R"
author: "Bill Ochieng"
output: html_document
---

```{r setup, include=FALSE}
library(readr)
library(dplyr)
library(ggplot2)
library(broom)
library(tidyr)
library(car)
```

## Load ESG and Financial Data

```{r load-data}
# Read data
esg_data <- read_csv("../data/processed/esg_financial_data.csv")
head(esg_data)
```

## Summary Statistics

```{r summary}
esg_data %>%
  summarise(across(where(is.numeric), list(mean = mean, sd = sd), na.rm = TRUE))
```

## Regression Analysis: ESG vs Profitability

```{r regression}
model <- lm(ROE ~ ESG_Score + Environment + Social + Governance, data = esg_data)
summary(model)
tidy(model)
```

## Visualizations

```{r visualizations}
ggplot(esg_data, aes(x = ESG_Score, y = ROE)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title = "ESG Score vs Return on Equity", x = "ESG Score", y = "ROE")
```

## Interpretation

```{r diagnostic}
# Check for multicollinearity
vif(model)
```

Interpret the results and export outputs if needed.

---
title: "ESG Analysis in R"
author: "Bill Ochieng"
output: 
  html_document:
    toc: true
    toc_depth: 2
    df_print: paged
---

```{r setup, include=FALSE}
# Ensure the working directory is your project root
if (!require(here)) install.packages("here")
library(here)

# Load all required packages
pkgs <- c("readr","dplyr","ggplot2","broom","tidyr","car")
installed <- rownames(installed.packages())
for (p in pkgs) if (!p %in% installed) install.packages(p)
lapply(pkgs, library, character.only = TRUE)

# Options
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE
)


